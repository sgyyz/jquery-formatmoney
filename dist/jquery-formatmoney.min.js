/*
 *  jquery-formatmoney - v0.1.0
 *  jQuery plugin to format text or input type money.
 *  https://github.com/sgyyz/jquery-formatmoney
 *
 *  Made by Troy Yang
 *  Create at 2014-10-25

 *  Updated at 2015-03-20

 *  Under MIT License (https://raw.githubusercontent.com/sgyyz/jquery-formatmoney/master/LICENSE)
 */
!function($){"use strict";$.broswer||($.broswer={},$.broswer.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),$.broswer.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),$.broswer.opera=/opera/.test(navigator.userAgent.toLowerCase()),$.broswer.msie=/msie/.test(navigator.userAgent.toLowerCase()));var a={init:function(a){return a=$.extend({prefix:"",thousands:",",decimal:".",precision:2},a),this.each(function(){function b(b){var e,f,g,h=b.replace(a.prefix,""),i=Number(h).toFixed(a.precision),j="";return f=i.replace(/-/,"").split(a.decimal),e=f[0],a.precision>0&&(j=f[1]),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,a.thousands),g=(d(b)?"-":"")+e,a.precision>0&&(g=g+a.decimal+j),c(g)}function c(b){return a.prefix+b}function d(a){return/-/.test(a)}function e(b){return b=b.replace("-","").replace(a.prefix,""),c("-"+b)}function f(){var a;j.createTextRange&&(a=j.createTextRange(),a.collapse(!1),a.select())}function g(){f()}function h(c){c=c||window.event;var d,g,h,i,k,l,m=c.which||c.charCode||c.keyCode,n=new RegExp(a.thousands,"gm");return void 0===m?!1:48>m||m>57?45===m?(j.val(e(j.val())),!1):61===m?(j.val($input.val().replace("-","")),!1):13===m||9===m?!0:!$.browser.mozilla||37!==m&&39!==m||0!==c.charCode?(preventDefault(c),!0):!0:(c.preventDefault(),d=String.fromCharCode(m),l=j.val().replace(a.prefix,"").replace(n,""),a.precision>0?(g=l.replace("-","").split(a.decimal),h=g[0],i=g[1],h+=i[0],i=i.substring(1,i.length)+d,k=h+a.decimal+i):k=l+d,j.val(b(k)),void f())}function i(c){c=c||window.event;var d,e,f,g,h,i,k,l=c.which||c.charCode||c.keyCode,m=!1;return void 0===l?!1:void((8===l||46===l||63272===l)&&(c.preventDefault(),d=j.val(),h=/-/.test(d),m=!/\./.test(d),d=d.replace(new RegExp(a.thousands,"gm"),"").replace(a.prefix,"").replace("-",""),e=d.split(a.decimal),f=e[0],g=e[1],g=f[f.length-1]+g,f=f.substring(0,f.length-1),i=m?f:f+a.decimal+g,k=Number(i).toFixed(a.precision),k=a.prefix+(h?"-":"")+i,j.val(b(k))))}var j=$(this),k=j.is('input[type="text"]');k?(j.val(b(j.val())),j.unbind(".formatmoney"),j.bind("focus.formatmoney",g),j.bind("keypress.formatmoney",h),j.bind("keydown.formatmoney",i)):j.text(b(j.text()))})}};$.fn.formatmoney=function(b){return a.init.call(this,b)}}(window.jQuery);